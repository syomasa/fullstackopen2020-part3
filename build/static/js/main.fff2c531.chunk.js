(this.webpackJsonptelephone_directory=this.webpackJsonptelephone_directory||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(16),u=t(2),r=t(0),c=t.n(r),l=t(15),o=t.n(l),i=t(4),m=t.n(i),s="/api/persons",d=function(e){return m.a.post(s,e).then((function(e){return e.data}))},f=function(){return m.a.get(s).then((function(e){return e.data}))},b=function(e,n){return m.a.put("".concat(s,"/").concat(e),n)},h=function(e){return m.a.delete("".concat(s,"/").concat(e))},p=(t(39),function(e){return c.a.createElement("div",null,c.a.createElement("h2",null,"Filter"),c.a.createElement("form",null,"search: ",c.a.createElement("input",{value:e.value,onChange:e.changeHandler})))}),E=function(e){return c.a.createElement("div",null,c.a.createElement("h2",null,"Add new name and phonenumber"),c.a.createElement("form",{onSubmit:e.submitHandler},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:e.nameValue,onChange:e.nameChangeHandler})),c.a.createElement("div",null,"phonenumber: ",c.a.createElement("input",{value:e.numberValue,onChange:e.numberChangeHandler})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))},v=function(e){return c.a.createElement("div",null,c.a.createElement("h2",null,"Numbers"),e.persons.map((function(n,t){return c.a.createElement("p",{key:t},n.name," - ",n.number," ",c.a.createElement(g,{handleDelete:e.handleDelete.bind(void 0,n)})," ")})))},g=function(e){return c.a.createElement("button",{onClick:e.handleDelete},"delete")},j=function(e){var n=e.message,t=e.error;return null==n?null:!0===t?c.a.createElement("div",{className:"error"},n):c.a.createElement("div",{className:"successful"},n)},O=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],l=n[1],o=Object(r.useState)(""),i=Object(u.a)(o,2),m=i[0],s=i[1],g=Object(r.useState)(""),O=Object(u.a)(g,2),y=O[0],w=O[1],C=Object(r.useState)(!0),H=Object(u.a)(C,2),S=H[0],D=H[1],k=Object(r.useState)(""),T=Object(u.a)(k,2),V=T[0],N=T[1],x=Object(r.useState)(null),J=Object(u.a)(x,2),L=J[0],_=J[1],A=Object(r.useState)(!1),B=Object(u.a)(A,2),F=B[0],I=B[1],P=S?t:t.filter((function(e){return!0===e.important}));return Object(r.useEffect)((function(){f().then((function(e){l(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("h1",null,"Phonebook"),c.a.createElement(j,{message:L,error:F}),c.a.createElement(p,{value:V,changeHandler:function(e){D(!1),N(e.target.value),t.forEach((function(n){n.name.toLowerCase().startsWith(e.target.value.toLowerCase())?n.important=!0:n.important=!1}))}}),c.a.createElement(E,{submitHandler:function(e){(e.preventDefault(),t.some((function(e){return!(e.name!==m||!window.confirm("".concat(m," already exits. Do you want to update?")))&&(e.number=y,b(e.id,e).then((function(n){I(!1),_("".concat(e.name,"'s phonenumber updated successfully")),l(Object(a.a)(t)),setTimeout((function(){_(null)}),4e3)})),!0)})))||d({name:m,number:y,important:!1}).then((function(e){console.log(e),s(""),w(""),D(!0),I(!1),_("".concat(e.name," added successfully")),l(t.concat(e)),setTimeout((function(){_(null)}),4e3)}))},nameChangeHandler:function(e){s(e.target.value)},numberChangeHandler:function(e){w(e.target.value)},nameValue:m,numberValue:y}),c.a.createElement(v,{persons:P,handleDelete:function(e){window.confirm("Do you want to delete ".concat(e.name,"'s number"))&&h(e.id).then((function(n){I(!1),_("".concat(e.name," removed successfully")),l(t.filter((function(n){return n.id!==e.id}))),setTimeout((function(){_(null)}),4e3)})).catch((function(n){I(!0),_("".concat(e.name," is already deleted")),setTimeout((function(){_(null)}),4e3)}))}}))};o.a.render(c.a.createElement(O,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.fff2c531.chunk.js.map